<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZENIZZO - Catálogo de Acordeones</title>
    <meta name="description" content="Explora el catálogo exclusivo de acordeones ZENIZZO. Calidad, sonido y tradición para el músico moderno.">
    
    <!-- Favicon -->
    <link rel="icon" href="https://i.imgur.com/v1fnJDV.png" type="image/png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
        :root { --gold-color: #D4AF37; --dark-bg: #141414; --light-bg: #222; --text-color: #fff; --font-title: 'Oswald', sans-serif; --font-body: 'Montserrat', sans-serif; --danger-color: #e50914; --whatsapp-color: #25D366; }
        * { margin: 0; padding: 0; box-sizing: border-box; } html { scroll-behavior: smooth; } 
        body { font-family: var(--font-body); background-color: var(--dark-bg); color: var(--text-color); }
        .page { display: none; } .page.active { display: block; animation: fadeIn 0.5s ease-in-out; } 
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .container { max-width: 1600px; margin: 0 auto; padding: 0 4%; }
        .header { position: fixed; top: 0; width: 100%; z-index: 100; display: flex; justify-content: space-between; align-items: center; padding: 1rem 4%; background: linear-gradient(to bottom, rgba(0,0,0,0.7) 10%, rgba(0,0,0,0)); transition: background-color 0.3s; }
        .header.scrolled { background-color: var(--dark-bg); }
        .header-logo img { max-width: 150px; height: auto; cursor: pointer; }
        .header-right { display: flex; align-items: center; justify-content: flex-end; flex-wrap: wrap; gap: 1rem 1.5rem; }
        .main-nav { display: flex; align-items: center; gap: 1.5rem; }
        .main-nav a { color: var(--text-color); text-decoration: none; font-weight: 700; transition: color 0.3s; cursor: pointer; } .main-nav a:hover { color: #b3b3b3; }
        .social-icons { display: flex; align-items: center; gap: 1rem; } .social-icon { color: var(--text-color); font-size: 1.2rem; transition: color 0.3s, transform 0.3s; }
        .social-icon:hover { color: var(--gold-color); transform: scale(1.15); }
        .header-auth { display: flex; align-items: center; gap: 1rem; }
        .btn { display: inline-block; padding: 0.7rem 1.2rem; border: none; border-radius: 5px; cursor: pointer; font-weight: 700; transition: opacity 0.3s; text-decoration: none; }
        .btn-gold { background-color: var(--gold-color); color: #111; } .btn-danger { background-color: var(--danger-color); color: var(--text-color); } .btn:hover { opacity: 0.8; }
        .hero { 
            height: 100vh;
            position: relative; 
            overflow: hidden;
        }
        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            z-index: 1;
        }
        .hero-slide.active {
            opacity: 1;
            z-index: 2;
        }
        .hero-slide.pan-down {
            animation: pan-down 12s ease-in-out forwards;
        }
        @keyframes pan-down {
            from { background-position: center 50%; }
            to { background-position: center 60%; }
        }
        .hero::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 150px; background: linear-gradient(to top, var(--dark-bg), transparent); z-index: 3; }
        .content-section { padding: 3rem 0; } 
        #home-page .content-section:first-of-type { margin-top: 0; }
        .page-title { font-family: var(--font-title); font-size: 2.5rem; md:font-size: 3rem; margin-bottom: 2rem; padding-top: 8rem; } .row-title { font-family: var(--font-title); font-size: 1.8rem; margin-bottom: 1.5rem; }
        .product-grid, .video-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; } .product-thumb { border-radius: 5px; overflow: hidden; cursor: pointer; transition: transform 0.3s; position: relative; }
        .product-thumb:hover { transform: scale(1.05); } .product-thumb img { width: 100%; height: 100%; object-fit: cover; aspect-ratio: 4/3; } .video-player iframe { width: 100%; height: auto; aspect-ratio: 16/9; border: none; border-radius: 5px; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); justify-content: center; align-items: center; padding: 1rem; }
        .modal-content { background-color: var(--light-bg); padding: 2rem; border-radius: 10px; width: 90%; max-width: 500px; position: relative; } .close-modal { color: #aaa; position: absolute; top: 1rem; right: 1.5rem; font-size: 2rem; cursor: pointer; z-index: 20; }
        .modal-title { font-family: var(--font-title); font-size: 2rem; margin-bottom: 2rem; } .form-group { margin-bottom: 1.5rem; } .form-group label { display: block; margin-bottom: 0.5rem; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 1rem; border-radius: 5px; border: 1px solid #555; background-color: var(--dark-bg); color: var(--text-color); }
        
        #product-detail-modal .modal-content {
            max-width: 90vw;
            width: auto;
            max-height: 90vh;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background-color: transparent;
        }
        #detail-image-container {
            flex-grow: 1;
            width: 100%;
            margin-bottom: 1rem;
            min-height: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #detail-image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }
        #whatsapp-producto-btn { 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            gap: 0.7rem; 
            background-color: var(--whatsapp-color); 
            color: white; 
            width: auto; 
            margin: 0 auto;
            flex-shrink: 0;
        }
        
        #admin-page { background-color: var(--dark-bg); } #admin-page .container { padding-top: 8rem; } .admin-tabs { display: flex; border-bottom: 1px solid #555; margin-bottom: 2rem; overflow-x: auto; }
        .tab-btn { padding: 1rem; white-space: nowrap; cursor: pointer; background: none; border: none; color: #888; font-size: 1.2rem; font-family: var(--font-title); } .tab-btn.active { color: var(--gold-color); border-bottom: 3px solid var(--gold-color); }
        .tab-content { display: none; } .tab-content.active { display: block; } .admin-list-item { display: flex; flex-direction: column; sm:flex-row; justify-content: space-between; align-items: flex-start; sm:align-items: center; background: var(--light-bg); padding: 1rem; border-radius: 5px; margin-bottom: 1rem; gap: 1rem; }
        .admin-list-item .btn { padding: 0.5rem 1rem; } .footer { text-align: center; padding: 3rem 0; margin-top: 2rem; opacity: 0.6; }
        #whatsapp-flotante { position: fixed; bottom: 25px; right: 25px; background-color: var(--whatsapp-color); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 1001; text-decoration: none; transition: transform 0.3s; }
        #whatsapp-flotante:hover { transform: scale(1.1); }
    </style>
</head>
<body>
    <header class="header" id="main-header">
        <div class="header-logo"><img src="https://i.imgur.com/ZlWEt3M.png" alt="ZENIZZO Logo" id="logo-btn"></div>
        <div class="header-right">
            <nav class="main-nav">
                <a data-page="home-page">Inicio</a>
                <a data-page="catalog-page">Catálogo</a>
                <a data-page="videos-page">Videos</a>
            </nav>
            <div class="social-icons">
                <a href="https://www.facebook.com/eddiesantiago.ruizgomez/" target="_blank" class="social-icon" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/santiagoruiz_ac/" target="_blank" class="social-icon" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://www.youtube.com/@santiagoruiz_ac" target="_blank" class="social-icon" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                <a href="https://www.tiktok.com/@santiagoruiz_ac" target="_blank" class="social-icon" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
            </div>
            <div class="header-auth" id="auth-container">
                <button id="login-btn" class="btn btn-danger">Acceder</button>
                <div id="user-session" style="display: none; align-items: center; gap: 1rem;">
                    <span id="user-info"></span>
                    <button id="admin-panel-btn" class="btn btn-gold">Panel</button>
                    <button id="logout-btn" class="btn btn-danger">Cerrar Sesión</button>
                </div>
            </div>
        </div>
    </header>
    
    <main>
        <section id="home-page" class="page active">
            <div class="hero" id="hero-section">
                <!-- El carrusel de imágenes se inyectará aquí -->
            </div>
            <div class="content-section"><div class="container"><h2 class="row-title">Nuestro Trabajo</h2><div id="latest-products-grid" class="product-grid justify-center"></div><div class="text-center mt-8"><a id="view-full-catalog-btn" class="btn btn-gold text-lg cursor-pointer">Ver Catálogo Completo</a></div></div></div>
            <div class="content-section"><div class="container"><h2 class="row-title">🔧 MODIFICACIONES ZENIZZO 🎹</h2><div id="modifications-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div></div></div>
            <div class="content-section bg-black bg-opacity-20 py-12">
                <div class="container">
                    <h2 class="row-title">Videos Recientes</h2>
                    <div id="latest-videos-grid" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
                    <div class="text-center mt-8">
                        <a href="https://www.youtube.com/@santiagoruiz_ac" id="youtube-channel-link" target="_blank" class="btn btn-gold text-lg inline-flex items-center gap-2">
                            Visita Nuestro Canal de YouTube <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
            </div>
        </section>
        <section id="catalog-page" class="page"><div class="container"><h1 class="page-title">trabajos realizados</h1><div id="full-catalog-grid" class="product-grid"></div></div></section>
        <section id="videos-page" class="page"><div class="container"><h1 class="page-title">Demostraciones en Video</h1><div id="full-videos-grid" class="video-grid"></div></div></section>
        <section id="admin-page" class="page"><div class="container"><div class="admin-tabs"><button class="tab-btn active" data-tab="products">Productos</button><button class="tab-btn" data-tab="videos">Videos</button><button class="tab-btn" data-tab="modifications">Modificaciones</button></div><div id="tab-products" class="tab-content active"><h2>Gestionar Productos</h2><form id="product-form" class="admin-form"><input type="hidden" id="product-id"><div class="form-group"><label for="product-title">Título</label><input type="text" id="product-title" required></div><div class="form-group"><label for="product-description">Descripción</label><textarea id="product-description" rows="4" required></textarea></div><div class="form-group"><label for="product-category">Categoría</label><input type="text" id="product-category" required></div><div class="form-group"><label for="product-images">URLs de Imágenes (separadas por coma)</label><textarea id="product-images" required></textarea></div><div class="form-group"><label for="is-featured">Destacado</label><select id="is-featured"><option value="no">No</option><option value="yes">Sí</option></select></div><button type="submit" class="btn btn-gold">Guardar</button><button type="button" id="cancel-edit-product" class="btn btn-secondary" style="display:none;">Cancelar</button></form><hr style="margin: 2rem 0; border-color: #333;"><h3>Lista</h3><div id="admin-product-list"></div></div><div id="tab-videos" class="tab-content"><h2>Gestionar Videos</h2><form id="video-form" class="admin-form"><div class="form-group"><label for="video-url">URL YouTube</label><input type="text" id="video-url" required></div><button type="submit" class="btn btn-gold">Añadir</button></form><hr style="margin: 2rem 0; border-color: #333;"><h3>Lista</h3><div id="admin-video-list"></div></div><div id="tab-modifications" class="tab-content"><h2>Gestionar Modificaciones</h2><form id="modification-form" class="admin-form"><input type="hidden" id="modification-id"><div class="form-group"><label for="modification-title">Título</label><input type="text" id="modification-title" required></div><div class="form-group"><label for="modification-description">Descripción</label><textarea id="modification-description" rows="4" required></textarea></div><div class="form-group"><label for="modification-image">URL de Imagen</label><input type="text" id="modification-image" required></div><button type="submit" class="btn btn-gold">Guardar</button></form><hr style="margin: 2rem 0; border-color: #333;"><h3>Lista</h3><div id="admin-modification-list"></div></div></div></section>
    </main>
    <footer class="footer"><p>&copy; 2025 ZENIZZO Accordions.</p></footer>
    <div id="auth-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><form id="login-form"><h2 class="modal-title">Iniciar Sesión</h2><div class="form-group"><label for="login-password">Contraseña</label><input type="password" id="login-password" required></div><button type="submit" class="btn btn-danger" style="width:100%;">Entrar</button></form></div></div>
    <div id="product-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="detail-image-container"></div>
            <a id="whatsapp-producto-btn" class="btn mt-4" target="_blank"><i class="fab fa-whatsapp"></i> Contactar sobre este trabajo</a>
        </div>
    </div>
    <a id="whatsapp-flotante" target="_blank"><i class="fab fa-whatsapp"></i></a>
    
    <script>
    $(document).ready(function() {
        const ADMIN_PASSWORD = "admin";
        const WHATSAPP_NUMBER = "573016761598";
        const YOUTUBE_CHANNEL_URL = "https://www.youtube.com/@santiagoruiz_ac";
        const DEFAULT_WHATSAPP_MESSAGE = "Hola, estoy interesado en los acordeones ZENIZZO.";

        let db = {
            products: [
                { id: 10, title: 'Acordeón Negro Mate', category: 'Profesional', imageUrls: ['https://i.imgur.com/93ExBqo.jpeg'], description: 'Un acabado moderno y elegante con un sonido profundo y resonante.', isFeatured: false, attributes: { Tono: 8, Respuesta: 8, Peso: 7, Proyección: 8 } },
                { id: 11, title: 'Acordeón Rojo Clásico', category: 'Estudiante', imageUrls: ['https://i.imgur.com/vRmhUns.jpeg'], description: 'El instrumento perfecto para destacar en el escenario.', isFeatured: false, attributes: { Tono: 7, Respuesta: 7, Peso: 8, Proyección: 7 } },
                { id: 1, title: 'ZENIZZO Imperial', category: 'Profesional', imageUrls: ['https://i.imgur.com/0WYbMjE.jpeg'], description: 'El pináculo del sonido vallenato.', isFeatured: false, attributes: { Tono: 9, Respuesta: 10, Peso: 7, Proyección: 9 } },
                { id: 2, title: 'ZENIZZO Compadre', category: 'Estudiante', imageUrls: ['https://i.imgur.com/6OTeoCT.png'], description: 'Ideal para iniciar en el mundo del vallenato.', isFeatured: false, attributes: { Tono: 6, Respuesta: 7, Peso: 9, Proyección: 6 } },
                { id: 3, title: 'Acordeón de Batalla', category: 'Estudiante', imageUrls: ['https://i.imgur.com/LL4hiRQ.jpeg'], description: 'Robusto y confiable para largas jornadas de práctica.', isFeatured: false, attributes: { Tono: 7, Respuesta: 7, Peso: 8, Proyección: 6 } },
                { id: 4, title: 'ZENIZZO Piatanesi', category: 'Colección', imageUrls: ['https://i.imgur.com/3HITeOO.jpeg'], description: 'Sonido clásico y nostálgico.', isFeatured: false, attributes: { Tono: 10, Respuesta: 8, Peso: 6, Proyección: 7 } },
                { id: 5, title: 'Acordeón Rojo Pasión', category: 'Profesional', imageUrls: ['https://i.imgur.com/Qpon8Fs.jpeg'], description: 'Un diseño vibrante con un sonido potente.', isFeatured: false, attributes: { Tono: 8, Respuesta: 9, Peso: 8, Proyección: 8 } },
                { id: 6, title: 'Acordeón Blanco Perla', category: 'Profesional', imageUrls: ['https://i.imgur.com/aovEItm.jpeg'], description: 'Elegancia y claridad en cada nota.', isFeatured: false, attributes: { Tono: 9, Respuesta: 8, Peso: 8, Proyección: 9 } },
                { id: 7, title: 'Acordeón Clásico Madera', category: 'Colección', imageUrls: ['https://i.imgur.com/HIYlIGC.jpeg'], description: 'La calidez de la madera con la tradición del vallenato.', isFeatured: false, attributes: { Tono: 8, Respuesta: 7, Peso: 7, Proyección: 7 } },
                { id: 8, title: 'Acordeón Edición Especial', category: 'Colección', imageUrls: ['https://i.imgur.com/Du8HGDZ.jpeg'], description: 'Un instrumento único para coleccionistas y conocedores.', isFeatured: false, attributes: { Tono: 10, Respuesta: 10, Peso: 6, Proyección: 9 } },
                { id: 9, title: 'Acordeón Compacto', category: 'Estudiante', imageUrls: ['https://i.imgur.com/akm1hJZ.jpeg'], description: 'Ligero y versátil, ideal para viajar y aprender.', isFeatured: false, attributes: { Tono: 6, Respuesta: 6, Peso: 10, Proyección: 5 } }
            ],
            videos: [ 
                { id: 1, url: 'https://youtu.be/TLHAkAVzgZM?si=4Tfc_4Mrfiv2kfAe' },
                { id: 2, url: 'https://youtu.be/3I3G6Er79fI?si=sarVRlriylCGi3RU' },
                { id: 3, url: 'https://youtu.be/QeaPZiM_x18?si=fqVho1k0QCm6Y881' },
                { id: 4, url: 'https://youtu.be/7u0-9cgrQFE?si=rglUc0lv_Hy9OSB9' },
                { id: 5, url: 'https://youtu.be/OCpbht9v3OA?si=g7p2a5_lxEKy6J_C' },
                { id: 6, url: 'https://www.youtube.com/shorts/YGg-aD_4fBM' },
                { id: 7, url: 'https://www.youtube.com/shorts/D0P1JrbNUDo' },
                { id: 8, url: 'https://www.youtube.com/shorts/3u33lqzzWgw' }
            ],
            modifications: [
                { id: 1, title: '🔧 MODIFICACIONES ZENIZZO 🎹', description: 'Transformamos tu acordeón para elevar su potencia y versatilidad musical:\n🎛️ Instalación de 4 registros:\n• Clarinete 🎶\n• Norteño 🌵\n• Master 🎼\n• Bandoneón 🎻\n🛠️ Instalación de 34 botones\n\n🎯 Modificación de botonera para mayor comodidad, alcance y precisión.\n✨ Hecho a mano con precisión, conservando la estética del instrumento y mejorando su expresividad.\n\n🎹 Tu acordeón, a otro nivel.', imageUrls: ['https://i.imgur.com/YrL9EXb.jpeg'] },
                { id: 2, title: '🔧 MODIFICACIONES ZENIZZO 🎹', description: 'Transformamos tu acordeón para elevar su potencia y versatilidad musical:\n🎛️ Instalación de 4 registros:\n• Clarinete 🎶\n• Norteño 🌵\n• Master 🎼\n• Bandoneón 🎻\n🛠️ Instalación de 34 botones\n\n🎯 Modificación de botonera para mayor comodidad, alcance y precisión.\n✨ Hecho a mano con precisión, conservando la estética del instrumento y mejorando su expresividad.\n\n🎹 Tu acordeón, a otro nivel.', imageUrls: ['https://i.imgur.com/Zkxq2WN.jpeg'] }
            ]
        };

        function loadDatabase() { const savedDb = localStorage.getItem('zenizzoDb'); if (savedDb) { db = JSON.parse(savedDb); } }
        function saveDatabase() { localStorage.setItem('zenizzoDb', JSON.stringify(db)); }

        function renderAll() { initHeroCarousel(); renderHomePage(); renderCatalogPage(); renderVideosPage(); renderAdminLists(); }

        function initHeroCarousel() {
            const images = [ 'https://i.imgur.com/mxXpAqU.png', 'https://i.imgur.com/rBc7yrF.png', 'https://i.imgur.com/cxlDVo7.jpeg' ];
            let currentIndex = 0;
            const hero = $('#hero-section').empty();
            images.forEach((imgUrl, index) => {
                const slide = $('<div/>', { class: 'hero-slide' }).css('background-image', `linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url(${imgUrl})`);
                if (index === 0) slide.addClass('active zoom-in');
                hero.append(slide);
            });

            setInterval(() => {
                const slides = $('.hero-slide');
                slides.eq(currentIndex).removeClass('active zoom-in');
                currentIndex = (currentIndex + 1) % slides.length;
                slides.eq(currentIndex).addClass('active zoom-in');
            }, 5000);
        }

        function renderHomePage() {
            const homeProducts = db.products.slice(0, 3);
            const latestVideos = db.videos.slice(-3).reverse();
            $('#latest-products-grid').empty();
            homeProducts.forEach(p => renderProduct(p, '#latest-products-grid'));
            $('#latest-videos-grid').empty();
            latestVideos.forEach(v => renderVideo(v, '#latest-videos-grid'));
            const modificationsGrid = $('#modifications-grid').empty();
            db.modifications.forEach(m => renderProduct(m, modificationsGrid));
        }

        function renderCatalogPage() { $('#full-catalog-grid').empty(); db.products.forEach(p => renderProduct(p, '#full-catalog-grid')); }
        function renderVideosPage() { $('#full-videos-grid').empty(); db.videos.forEach(v => renderVideo(v, '#full-videos-grid')); }
        
        function renderProduct(product, container) { 
            const thumb = $('<div/>', { class: 'product-thumb' }).html(`<img src="${product.imageUrls[0]}" alt="${product.title}">`);
            thumb.on('click', () => showProductDetail(product));
            $(container).append(thumb);
        }
        
        function getYoutubeId(url) {
            let ID = '';
            url = url.replace(/(>|<)/gi, '').split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/|\/shorts\/)/);
            if (url[2] !== undefined) {
                ID = url[2].split(/[^0-9a-z_\-]/i);
                ID = ID[0];
            } else {
                ID = url;
            }
            return ID;
        }

        function renderVideo(video, container) { 
            try { 
                const videoId = getYoutubeId(video.url);
                if (videoId) { 
                    $('<div/>', { class: 'video-player' }).html(`<iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`).appendTo(container); 
                } 
            } catch (e) { 
                console.error("URL de video inválida:", video.url); 
            } 
        }

        function showPage(pageId) { $('.page').removeClass('active'); $('#' + pageId).addClass('active'); $(window).scrollTop(0); }
        $('[data-page]').on('click', function() { showPage($(this).data('page')); });
        $('#logo-btn').on('click', () => showPage('home-page'));
        $('#view-full-catalog-btn').on('click', () => showPage('catalog-page'));

        function checkAuth() { if (sessionStorage.getItem('isAdmin') === 'true') { $('#login-btn').hide(); $('#user-session').css('display', 'flex'); } else { $('#login-btn').show(); $('#user-session').hide(); showPage('home-page'); } }
        $('#login-form').on('submit', function(e) { e.preventDefault(); if ($('#login-password').val() === ADMIN_PASSWORD) { sessionStorage.setItem('isAdmin', 'true'); checkAuth(); $('#auth-modal').fadeOut(); } else { alert('Contraseña incorrecta.'); } });
        $('#logout-btn').on('click', function() { sessionStorage.removeItem('isAdmin'); checkAuth(); });
        $('#login-btn').on('click', () => $('#auth-modal').fadeIn());
        $('.close-modal').on('click', () => $('.modal').fadeOut());

        function renderAdminLists() {
            const productList = $('#admin-product-list').empty();
            db.products.forEach(p => { $('<div/>', { class: 'admin-list-item' }).html(`<span>${p.title}</span><div><button class="btn btn-secondary btn-edit">Editar</button> <button class="btn btn-danger btn-delete">Eliminar</button></div>`).find('.btn-edit').on('click', () => editProduct('products', p.id)).end().find('.btn-delete').on('click', () => deleteItem('products', p.id)).end().appendTo(productList); });
            const videoList = $('#admin-video-list').empty();
            db.videos.forEach(v => { $('<div/>', { class: 'admin-list-item' }).html(`<span>${v.url}</span><button class="btn btn-danger btn-delete">Eliminar</button>`).find('.btn-delete').on('click', () => deleteItem('videos', v.id)).end().appendTo(videoList); });
            const modificationList = $('#admin-modification-list').empty();
            db.modifications.forEach(m => { $('<div/>', { class: 'admin-list-item' }).html(`<span>${m.title}</span><div><button class="btn btn-secondary btn-edit">Editar</button> <button class="btn btn-danger btn-delete">Eliminar</button></div>`).find('.btn-edit').on('click', () => editProduct('modifications', m.id)).end().find('.btn-delete').on('click', () => deleteItem('modifications', m.id)).end().appendTo(modificationList); });
        }

        $('#product-form').on('submit', function(e) { e.preventDefault(); const id = parseInt($('#product-id').val()); const product = { title: $('#product-title').val(), description: $('#product-description').val(), category: $('#product-category').val(), imageUrls: $('#product-images').val().split(',').map(url => url.trim()), isFeatured: $('#is-featured').val() === 'yes', attributes: { Tono: 8, Respuesta: 8, Peso: 8, Proyección: 8 } }; if (id) { const index = db.products.findIndex(p => p.id === id); db.products[index] = { ...db.products[index], ...product }; } else { product.id = Date.now(); db.products.push(product); } saveAndRerender(); this.reset(); $('#cancel-edit-product').hide(); });
        $('#modification-form').on('submit', function(e) { e.preventDefault(); const id = parseInt($('#modification-id').val()); const mod = { title: $('#modification-title').val(), description: $('#modification-description').val(), imageUrls: [$('#modification-image').val()] }; if (id) { const index = db.modifications.findIndex(m => m.id === id); db.modifications[index] = { ...db.modifications[index], ...mod }; } else { mod.id = Date.now(); db.modifications.push(mod); } saveAndRerender(); this.reset(); });

        function editProduct(type, id) {
            const item = db[type].find(p => p.id === id);
            if(type === 'products') {
                $('#product-id').val(item.id); $('#product-title').val(item.title); $('#product-description').val(item.description); $('#product-category').val(item.category); $('#product-images').val(item.imageUrls.join(', ')); $('#is-featured').val(item.isFeatured ? 'yes' : 'no'); $('#cancel-edit-product').show(); $('.tab-btn[data-tab="products"]').click();
            } else {
                $('#modification-id').val(item.id); $('#modification-title').val(item.title); $('#modification-description').val(item.description); $('#modification-image').val(item.imageUrls[0]); $('.tab-btn[data-tab="modifications"]').click();
            }
        }
        $('#cancel-edit-product').on('click', function() { $('#product-form')[0].reset(); $('#product-id').val(''); $(this).hide(); });
        $('#video-form').on('submit', function(e) { e.preventDefault(); db.videos.push({ id: Date.now(), url: $('#video-url').val() }); saveAndRerender(); this.reset(); });
        
        function deleteItem(type, id) { if (confirm('¿Estás seguro?')) { db[type] = db[type].filter(item => item.id !== id); saveAndRerender(); } }
        function saveAndRerender() { saveDatabase(); renderAll(); }
        
        $('.tab-btn').on('click', function() { $('.tab-btn').removeClass('active'); $(this).addClass('active'); $('.tab-content').removeClass('active'); $('#' + $(this).data('tab')).addClass('active'); });
        
        function showProductDetail(product) {
            $('#detail-image-container').html(`<img src="${product.imageUrls[0]}" alt="${product.title}">`);
            const productMessage = `Hola, estoy interesado en el trabajo "${product.title}".`;
            $('#whatsapp-producto-btn').attr('href', `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(productMessage)}`);
            $('#product-detail-modal').fadeIn();
        }
        
        loadDatabase(); renderAll(); checkAuth();
        $('#whatsapp-flotante').attr('href', `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(DEFAULT_WHATSAPP_MESSAGE)}`);
        $('#youtube-channel-link').attr('href', YOUTUBE_CHANNEL_URL);
        $(window).on('scroll', () => { $('#main-header').toggleClass('scrolled', $(window).scrollTop() > 50); });
    });
    </script>
</body>
</html>
